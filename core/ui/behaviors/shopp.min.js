/*!
 * shopp.js - Shopp behavioral utility library
 * Copyright Â© 2008-2010 by Ingenesis Limited
 * Licensed under the GPLv3 {@see license.txt}
 */
;function jqnc(){return jQuery.noConflict()}jQuery.ua={chrome:false,mozilla:false,opera:false,msie:false,safari:false};jQuery.each(jQuery.ua,function(c,a){var ua=navigator.userAgent;jQuery.ua[c]=((new RegExp(c,"i").test(ua)))?true:false;if(jQuery.ua.mozilla&&c=="mozilla"){jQuery.ua.mozilla=new RegExp("firefox","i").test(ua)?true:false}if(jQuery.ua.chrome&&c=="safari"){jQuery.ua.safari=false}});function copyOf(src){var target=new Object(),v;for(v in src){target[v]=src[v]}return target}if(!Array.indexOf){Array.prototype.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i}}return -1}}function getCurrencyFormat(f){if(f&&f.currency){return f}var defaults={cpos:true,currency:"$",precision:2,decimals:".",thousands:",",grouping:[3]},map={cp:"cpos",c:"currency",p:"precision",d:"decimals",t:"thousands",g:"grouping"},settings=defaults;jQuery.each(map,function(k,v){if($s[k]===undefined){return}if("p"==k){settings[v]=parseInt($s[k],10)}else{if("cp"==k){settings[v]=Boolean($s[k])}else{if("g"==k){settings[v]=$s[k].split(",")}else{settings[v]=$s[k]}}}});return settings}function asMoney(n,f){f=getCurrencyFormat(f);n=formatNumber(n,f);if(f.cpos){return f.currency+n}return n+f.currency}function asPercent(n,f,p,pr){f=getCurrencyFormat(f);f.precision=p?p:1;return formatNumber(n,f,pr).replace(/0+$/,"").replace(new RegExp("\\"+f.decimals+"$"),"")+"%"}function formatNumber(n,f,pr){f=getCurrencyFormat(f);n=asNumber(n);var digits,i,whole=fraction=0,divide=false,sequence="",ng=[],d=n.toFixed(f.precision).toString().split("."),grouping=f.grouping?f.grouping:[3];n="";whole=d[0];if(d[1]){fraction=d[1]}if(grouping.indexOf(",")>-1){grouping=grouping.split(",")}else{grouping=[grouping]}i=0;lg=grouping.length-1;while(whole.length>grouping[Math.min(i,lg)]){if(grouping[Math.min(i,lg)]==""){break}divide=whole.length-grouping[Math.min(i++,lg)];sequence=whole;whole=sequence.substr(0,divide);ng.unshift(sequence.substr(divide))}if(whole){ng.unshift(whole)}n=ng.join(f.thousands);if(n==""){n=0}fraction=(pr)?new Number("0."+fraction).toString().substr(2,f.precision):fraction;fraction=(!pr||pr&&fraction.length>0)?f.decimals+fraction:"";if(f.precision>0){n+=fraction}return n}function asNumber(n,f){if(!n){return 0}f=getCurrencyFormat(f);if(n instanceof Number){return new Number(n.toFixed(f.precision))}if(typeof n==="number"){return new Number(n.toFixed(f.precision))}n=n.toString().replace(f.currency,"");n=n.toString().replace(new RegExp(/(\D\.|[^\d\,\.\-])/g),"");n=n.toString().replace(new RegExp("\\"+f.thousands,"g"),"");if(f.precision>0){n=n.toString().replace(new RegExp("\\"+f.decimals,"g"),".")}if(isNaN(new Number(n))){n=n.replace(new RegExp(/\./g),"").replace(new RegExp(/\,/),".")}return new Number(n)}function CallbackRegistry(){this.callbacks=new Array();this.register=function(name,callback){this.callbacks[name]=callback};this.call=function(name,arg1,arg2,arg3){this.callbacks[name](arg1,arg2,arg3)};this.get=function(name){return this.callbacks[name]}}if(!Number.prototype.roundFixed){Number.prototype.roundFixed=function(precision){var power=Math.pow(10,precision||0);return String(Math.round(this*power)/power)}}function quickSelects(e){var target=jQuery(e).size()==0?document:e;jQuery(target).on("mouseup.select","input.selectall",function(){this.select()})}function moneyInputs(e){var target=jQuery(e).size()==0?document:e;jQuery(document).on("change","input.money",function(){this.value=asMoney(this.value)})}function htmlentities(string){if(!string){return""}string=string.replace(new RegExp(/&#(\d+);/g),function(){return String.fromCharCode(RegExp.$1)});return string}jQuery.fn.fadeRemove=function(duration,callback){var $this=jQuery(this);$this.fadeOut(duration,function(){$this.remove();if(callback){callback()}});return this};jQuery.fn.hoverClass=function(){var $this=jQuery(this);$this.hover(function(){$this.addClass("hover")},function(){$this.removeClass("hover")});return this};jQuery.fn.clickSubmit=function(){var $this=jQuery(this);$this.click(function(){jQuery(this).closest("form").submit()});return this};jQuery.fn.setDisabled=function(setting){var $this=jQuery(this);$this.each(function(){if(setting){$this.attr("disabled",true).addClass("disabled")}else{$this.attr("disabled",false).removeClass("disabled")}});return this};jQuery.parseJSON=function(data){if(typeof(JSON)!=="undefined"&&typeof(JSON.parse)==="function"){try{return JSON.parse(data)}catch(e){return false}}else{return eval("("+data+")")}};jQuery.getQueryVar=function(name,url){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(url);if(results==null){return""}else{return decodeURIComponent(results[1].replace(/\+/g," "))}};jQuery(document).ready(function($){$("input.currency, input.money").change(function(){this.value=asMoney(this.value)}).change();$(".click-submit").clickSubmit();quickSelects()});